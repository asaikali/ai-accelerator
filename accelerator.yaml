accelerator:
  displayName: Spring AI Accelerator
  description: Quickly get started building Spring Apps that interact with Large Language Models
  iconUrl: https://raw.githubusercontent.com/asaikali/ai-accelerator/main/logo.png
  tags:
    - LLM 
    - AI
    - Spring
  options:

    #
    # UI option to get the package name for the generated java code
    #
    - name: packageName
      dataType: string
      required: true
      defaultValue: "com.acme"
      label: Package name
      description: Name of the package to put generated code under

    #
    # Use case
    # 
    - name: useCase
      label: "What type of AI capability are looking to implement?"
      inputType: select
      dataType: string
      display: true
      required: true
      defaultValue: "sm"
      choices:
        - text: Automatic Speech Recognition
          value: "asr"
        - text: Image Classificaton 
          value: "ic"
        - text: Token Classification 
          value: "tc"
        - text: Summarization
          value: "sm"
        - text: Questing Anwsering
          value: "qa"

    #
    # LLM API to use
    # 
    - name: aiService
      label: "AI Service"
      inputType: select
      dataType: string
      display: true
      required: true
      defaultValue: "azureOpenAI"
      choices:
        - text: Azure OpenAI Service
          value: "azureOpenAI"
        - text: Open AI
          value: "openAI"


engine:
  merge:
    #
    # include all files except the ones that we might not need
    #
    - include: [ "**/**" ]
      exclude: [ "snippets/**" ]

    #
    # Refactor the package name of the generated java code to
    # package name entered by the user using OpenRewrite Engine
    #
    - include: [ "**/*.java" ]
      chain:
        - type: OpenRewriteRecipe
          recipe: org.openrewrite.java.ChangePackage
          options:
            oldPackageName: "'com.example'"
            newPackageName: "#packageName"

    #
    # transform the readme to provide custom instructions on
    # how to use the generated project based on user choices.
    #
    - include: [ "app-readme.md"]
      chain:
        - type: RewritePath
          regex: app-readme(.*)
          rewriteTo: "'README' + #g1"
        - type: ReplaceText
          substitutions:
            - text: PROJECT-TITLE
              with: "#artifactId"
